This solution correctly implements custom comparator.